{
  "name": "amazon-cloudwatch-logs",
  "version": "1.0.0",
  "label": "Amazon CloudWatch Logs",
  "description": "Amazon CloudWatch Logs enables you to monitor, store, and access your system, application, and custom log files. This connector facilitates the automate operations related to the log group, log streams and metrics.",
  "publisher": "Community",
  "cs_approved": false,
  "cs_compatible": true,
  "category": "AWS Services",
  "icon_small_name": "cyops_small.png",
  "icon_large_name": "cyops_large.png",
  "help_online": "",
  "configuration": {
    "fields": [
      {
        "title": "AWS Access Key",
        "type": "password",
        "name": "aws_access_key_id",
        "required": true,
        "visible": true,
        "editable": true,
        "value": null,
        "description": "The access key for users AWS account"
      },
      {
        "title": "AWS Secret Key",
        "type": "password",
        "name": "aws_secret_access_key",
        "required": true,
        "visible": true,
        "editable": true,
        "value": null,
        "description": "The secret key for user's AWS account."
      },
      {
        "title": "Region Name",
        "type": "text",
        "name": "region_name",
        "required": true,
        "visible": true,
        "editable": true,
        "value": "",
        "description": "AWS Region to use, for example, us-west-1 or us-west-2 etc"
      }
    ]
  },
  "operations": [
    {
      "title": "Create Log Group",
      "operation": "create_log_group",
      "description": "Creates a log group with the specified name.",
      "category": "utilities",
      "enabled": true,
      "parameters": [
        {
          "title": "Log Group Name",
          "description": "The name of the log group.",
          "type": "text",
          "name": "logGroupName",
          "required": true,
          "visible": true,
          "editable": true,
          "value": ""
        },
        {
          "title": "KMS Key ID",
          "description": "The Amazon Resource Name (ARN) of the CMK to use when encrypting log data.",
          "tooltip": "The Amazon Resource Name (ARN) of the CMK to use when encrypting log data.",
          "type": "text",
          "name": "kmsKeyId",
          "required": false,
          "visible": true,
          "editable": true,
          "value": ""
        },
        {
          "title": "Tags",
          "description": "Provide the key-value pairs to add the tags.",
          "tooltip": "Provide tags in key-value pairs e.g {\"CWLogs\":\"Linux\"}",
          "type": "json",
          "name": "tags",
          "required": false,
          "visible": true,
          "editable": true,
          "value": "",
          "placeholder": "{\"tagName\":\"tagValue\"}"
        }
      ],
      "output_schema": {}
    },
    {
      "title": "Create Log Stream",
      "operation": "create_log_stream",
      "description": "Creates a log stream for the specified log group in Amazon CloudWatch",
      "category": "utilities",
      "enabled": true,
      "parameters": [
        {
          "title": "Log Group Name",
          "description": "The name of the log group.",
          "type": "text",
          "name": "logGroupName",
          "required": true,
          "visible": true,
          "editable": true,
          "value": ""
        },
        {
          "title": "Log Stream Name",
          "description": "The name of the log stream.",
          "type": "text",
          "name": "logStreamName",
          "required": true,
          "visible": true,
          "editable": true,
          "value": ""
        }
      ],
      "output_schema": {}
    },
    {
      "title": "Get Log Groups List",
      "operation": "get_list_log_groups",
      "description": "Lists the specified log groups. You can list all your log groups or filter the results by prefix of log group name.",
      "category": "utilities",
      "enabled": true,
      "parameters": [
        {
          "title": "Log Group Name Prefix",
          "description": "The log group name prefix to match.",
          "tooltip": "Prefix to match. e.g. For log group 'MySysLog', provide 'MySys'. If left blank, lists all the log groups",
          "type": "text",
          "name": "logGroupNamePrefix",
          "required": false,
          "visible": true,
          "editable": true,
          "value": ""
        },
        {
          "title": "Next Page Token",
          "description": "The token for the next set of items to return.",
          "type": "text",
          "name": "nextToken",
          "required": false,
          "visible": true,
          "editable": true,
          "value": ""
        },
        {
          "title": "Limit",
          "description": "The maximum number of items returned. If left blank, the default is up to 50 items.",
          "type": "integer",
          "name": "limit",
          "required": false,
          "visible": true,
          "editable": true,
          "value": ""
        }
      ],
      "output_schema": {
        "logGroups": [
          {
            "logGroupName": "",
            "creationTime": "",
            "retentionInDays": "",
            "metricFilterCount": "",
            "arn": "",
            "storedBytes": "",
            "kmsKeyId": ""
          }
        ],
        "nextToken": ""
      }
    },
    {
      "title": "Get Log Streams List",
      "operation": "get_list_log_streams",
      "description": "Get lists the log streams for the specified log group. You can list all the log streams or filter the results by prefix.",
      "category": "utilities",
      "enabled": true,
      "parameters": [
        {
          "title": "Log Group Name",
          "description": "The name of the log group.",
          "tooltip": "The name of the log group.",
          "type": "text",
          "name": "logGroupName",
          "required": true,
          "visible": true,
          "editable": true,
          "value": ""
        },
        {
          "title": "Order By",
          "name": "orderBy",
          "description": "The results to be ordered by the Log Stream Name or Event Time",
          "visible": true,
          "required": false,
          "editable": true,
          "type": "select",
          "options": [
            "LogStreamName",
            "LastEventTime"
          ],
          "value": "",
          "onchange": {
            "LogStreamName": [
              {
                "title": "Log Stream Name Prefix ",
                "description": "The log stream name prefix to match.",
                "tooltip": "Prefix to match. e.g. For log stream 'MySysLogStream', provide 'MySys'. If left blank, lists all the log groups",
                "type": "text",
                "name": "logStreamNamePrefix",
                "required": false,
                "visible": true,
                "editable": true,
                "value": ""
              }
            ]
          }
        },
        {
          "title": "Next Page Token",
          "description": "The token for the next set of items to return.",
          "type": "text",
          "name": "nextToken",
          "required": false,
          "visible": true,
          "editable": true,
          "value": ""
        },
        {
          "title": "Limit",
          "description": "The maximum number of items returned. If left blank, the default is up to 50 items.",
          "type": "integer",
          "name": "limit",
          "required": false,
          "visible": true,
          "editable": true,
          "value": ""
        }
      ],
      "output_schema": {
        "logStreams": [
          {
            "logStreamName": "",
            "creationTime": "",
            "firstEventTimestamp": "",
            "lastEventTimestamp": "",
            "lastIngestionTime": "",
            "uploadSequenceToken": "",
            "arn": "",
            "storedBytes": ""
          }
        ],
        "nextToken": ""
      }
    },
    {
      "title": "Get Log Events",
      "operation": "get_log_events",
      "description": "Get lists log events from the specified log stream. You can list all of the log events or filter using a time range.",
      "category": "utilities",
      "enabled": true,
      "parameters": [
        {
          "title": "Log Group Name",
          "description": "The name of the log group.",
          "type": "text",
          "name": "logGroupName",
          "required": true,
          "visible": true,
          "editable": true,
          "value": ""
        },
        {
          "title": "Log Stream Name",
          "description": "The name of the log stream.",
          "type": "text",
          "name": "logStreamName",
          "required": true,
          "visible": true,
          "editable": true,
          "value": ""
        },
        {
          "title": "Start Time",
          "description": "The start of the time range for which log events to be fetched.",
          "type": "datetime",
          "name": "startTime",
          "required": false,
          "visible": true,
          "editable": true,
          "value": null
        },
        {
          "title": "End Time",
          "description": "The end of the time range for which log events to be fetched.",
          "type": "datetime",
          "name": "endTime",
          "required": false,
          "visible": true,
          "editable": true,
          "value": null
        },
        {
          "title": "Next Page Token",
          "description": "The token for the next set of items to return.",
          "type": "text",
          "name": "nextToken",
          "required": false,
          "visible": true,
          "editable": true,
          "value": ""
        },
        {
          "title": "Limit",
          "description": "The maximum number of log events returned.",
          "type": "integer",
          "name": "limit",
          "required": false,
          "visible": true,
          "editable": true,
          "value": 10
        },
        {
          "title": "Oldest Logs First",
          "description": "If the value is true, the earliest log events are returned first. If the value is false, the latest log events are returned first. The default value is false.",
          "tooltip": "If the value is false, the latest log events are returned first. If you are using a previous nextForwardToken value as the nextToken then you must specify true.",
          "type": "checkbox",
          "name": "startFromHead",
          "required": false,
          "visible": true,
          "editable": true,
          "value": true
        }
      ],
      "output_schema": {
        "events": [
          {
            "message": "",
            "timestamp": "",
            "ingestionTime": ""
          }
        ],
        "nextForwardToken": "",
        "nextBackwardToken": ""
      }
    },
    {
      "title": "Delete Log Group",
      "operation": "delete_log_group",
      "description": "Deletes the specified log group and permanently deletes all the archived log events associated with the log group.",
      "category": "utilities",
      "enabled": true,
      "parameters": [
        {
          "title": "Log Group Name",
          "description": "The name of the log group is to be deleted.",
          "type": "text",
          "name": "logGroupName",
          "required": true,
          "visible": true,
          "editable": true,
          "value": ""
        }
      ],
      "output_schema": {}
    },
    {
      "title": "Delete Log Stream",
      "operation": "delete_log_stream",
      "description": "Deletes the specified log stream and permanently deletes all the archived log events associated with the log stream.",
      "category": "utilities",
      "enabled": true,
      "parameters": [
        {
          "title": "Log Group Name",
          "description": "The name of the log group.",
          "type": "text",
          "name": "logGroupName",
          "required": true,
          "visible": true,
          "editable": true,
          "value": ""
        },
        {
          "title": "Log Stream Name",
          "description": "The name of the log stream is to be deleted.",
          "type": "text",
          "name": "logStreamName",
          "required": true,
          "visible": true,
          "editable": true,
          "value": ""
        }
      ],
      "output_schema": {}
    },
    {
      "title": "Create Log Retention Policy",
      "operation": "create_log_retention_policy",
      "description": "Sets the retention of the specified log group. A retention policy allows you to configure the number of days for which to retain log events in the specified log group.",
      "category": "utilities",
      "enabled": true,
      "parameters": [
        {
          "title": "Log Group Name",
          "description": "The name of the log group.",
          "type": "text",
          "name": "logGroupName",
          "required": true,
          "visible": true,
          "editable": true,
          "value": ""
        },
        {
          "title": "Retention Period",
          "description": "Time period to retain the log events in the specified log group.",
          "name": "retentionInDays",
          "type": "select",
          "options": [
            "1 Day",
            "3 Days",
            "5 Days",
            "1 Week",
            "2 Weeks",
            "1 Month",
            "2 Months",
            "3 Months",
            "4 Months",
            "5 Months",
            "6 Months",
            "12 Months",
            "13 Months",
            "18 Months",
            "24 Months",
            "60 Months",
            "120 Months"
          ],
          "required": true,
          "visible": true,
          "editable": true,
          "value": ""
        }
      ],
      "output_schema": {}
    },
    {
      "title": "Delete Log Retention Policy",
      "operation": "delete_log_retention_policy",
      "description": "Deletes the retention of the specified log group. Log events do not expire if they belong to log groups without a retention policy.",
      "category": "utilities",
      "enabled": true,
      "parameters": [
        {
          "title": "Log Group Name",
          "description": "The name of the log group.",
          "type": "text",
          "name": "logGroupName",
          "required": true,
          "visible": true,
          "editable": true,
          "value": ""
        }
      ],
      "output_schema": {}
    },
    {
      "title": "Upload Log Event",
      "operation": "upload_log_event",
      "description": "Uploads a batch of log events to the specified log stream",
      "category": "utilities",
      "enabled": true,
      "parameters": [
        {
          "title": "Log Group Name",
          "description": "The name of the log group.",
          "type": "text",
          "name": "logGroupName",
          "required": true,
          "visible": true,
          "editable": true,
          "value": ""
        },
        {
          "title": "Log Stream Name",
          "description": "The name of the log stream.",
          "type": "text",
          "name": "logStreamName",
          "required": true,
          "visible": true,
          "editable": true,
          "value": ""
        },
        {
          "title": "Timestamp",
          "description": "Timestamp of log event",
          "type": "datetime",
          "name": "timestamp",
          "required": true,
          "visible": true,
          "editable": true,
          "value": "",
          "tooltip": "Choose date or provide epoch timestamp in milliseconds\n e.g 1633890600807"
        },
        {
          "title": "Message",
          "description": "Message of log event",
          "type": "text",
          "name": "message",
          "required": true,
          "visible": true,
          "editable": true,
          "value": ""
        },
        {
          "title": "Sequence Token",
          "description": "The sequence token obtained from the response of the previous upload call",
          "type": "text",
          "name": "sequenceToken",
          "required": false,
          "visible": true,
          "editable": true,
          "value": "",
          "tooltip": "The sequence token can be obtained using 'Get Log Streams List' operation or from the previous upload call"
        }
      ],
      "output_schema": {
        "nextSequenceToken": "",
        "rejectedLogEventsInfo": {
          "tooNewLogEventStartIndex": "",
          "tooOldLogEventEndIndex": "",
          "expiredLogEventEndIndex": ""
        }
      }
    },
    {
      "title": "Run Log Insight Query",
      "operation": "run_log_insight_query",
      "description": "Schedules a query of a log group using CloudWatch Logs Insights for the specified log group and time range.",
      "category": "utilities",
      "enabled": true,
      "parameters": [
        {
          "title": "Log Group Names",
          "description": "The list of log groups to be queried.",
          "type": "text",
          "name": "logGroupNames",
          "required": false,
          "visible": true,
          "editable": true,
          "value": "",
          "tooltip": "List of log groups in csv or list format. You can include up to 20 log groups.",
          "placeholder": "['MyLogGroup1', 'MyLogGroup2']"
        },
        {
          "title": "Start Time",
          "description": "The beginning of the time range to query.",
          "type": "datetime",
          "name": "startTime",
          "required": true,
          "visible": true,
          "editable": true,
          "value": null
        },
        {
          "title": "End Time",
          "description": "The end of the time range to query.",
          "type": "datetime",
          "name": "endTime",
          "required": true,
          "visible": true,
          "editable": true,
          "value": null
        },
        {
          "title": "Query String",
          "description": "The query string to be used.",
          "type": "text",
          "name": "queryString",
          "required": true,
          "visible": true,
          "editable": true,
          "value": "",
          "placeholder": "fields @timestamp, @message | sort @timestamp desc"
        },
        {
          "title": "Limit",
          "description": "The maximum number of log events to be returned.",
          "type": "integer",
          "name": "limit",
          "required": false,
          "visible": true,
          "editable": true,
          "value": "",
          "tooltip": "If left blank, the default is up to 1000 events."
        }
      ],
      "output_schema": {
        "queryId": ""
      }
    },
    {
      "title": "Get Log Insight Query Result",
      "operation": "get_log_insight_query_result",
      "description": "Returns the results from the specified query.",
      "category": "utilities",
      "enabled": true,
      "parameters": [
        {
          "title": "Log Insight Query ID",
          "description": "The ID number of the log insight query.",
          "type": "text",
          "name": "queryId",
          "required": true,
          "visible": true,
          "editable": true,
          "value": "",
          "tooltip": "The ID number of the log insight query."
        }
      ],
      "output_schema": {
        "results": [
          [
            {
              "field": "",
              "value": ""
            }
          ]
        ],
        "statistics": {
          "recordsMatched": "",
          "recordsScanned": "",
          "bytesScanned": ""
        },
        "status": ""
      }
    },
    {
      "title": "Stop Log Insight Query",
      "operation": "stop_log_insight_query",
      "description": "Stops a CloudWatch Logs Insights query that is in progress.",
      "category": "utilities",
      "enabled": true,
      "parameters": [
        {
          "title": "Log Insight Query ID",
          "description": "The ID number of the log insight query to stop.",
          "type": "text",
          "name": "queryId",
          "required": true,
          "visible": true,
          "editable": true,
          "value": "",
          "tooltip": "The ID number of the log insight query to stop."
        }
      ],
      "output_schema": {
        "success": ""
      }
    }
  ]
}